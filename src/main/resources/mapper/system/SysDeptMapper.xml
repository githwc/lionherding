<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lh.system.mapper.SysDeptMapper">

    <select id="queryTreeList" resultType="com.lh.common.tree.TreeNode">
        select
            sys_dept_id as id,
            parent_id as parentId,
            depart_name as title,
            sort as order_num
        from sys_dept
        where
            del_flag = 0
        order by sort
    </select>

    <select id="childrenDept" resultType="com.lh.system.entity.SysDept">
        select
            sd.sys_dept_id,sd.short_name,sd.address,sd.telephone,sd.org_type,sd.state,
            su.user_name as manager_name
        from sys_dept sd
        left join sys_user su on su.sys_user_id = sd.manager_id
        where
            sd.del_flag = 0
            and sd.parent_id = #{parentId}
        order by sd.sort
    </select>

</mapper>
